<!DOCTYPE html>
<html lang="de">
    
<head>
    <!-- Meta -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

   <!-- Link -->
   <link rel="stylesheet" href="style.css" />
   <script src="script.js"></script>
   <script src="./js/login.js"></script>
   <script src="./assets/templates/load_header_sidebar.js"></script>
   <link rel="stylesheet" href="./assets/fonts/font.css" />
   <link rel="stylesheet" href="./styles/side_header_template.css" />
   <!-- Link-Fonts -->
   <link rel="stylesheet" href="./assets/fonts/font.css" />
   <!-- Favicon -->
   <link rel="icon" type="image/x-icon" href="./assets/img/favicon.svg" />
   <!-- Title -->
    <title>Board</title>

    <style>
        .main-board{
            width: 1208px;
            margin-top: 8px;
            display: flex;
            flex-direction: column;
            font-family: 'Inter', sans-serif;
        }

        .board-headline-container{
            width: 1208px;
            height: 232px;
            display: flex;
            flex-direction: column;
            background-color: #F6F7F8;
        }

        .board-add-task{
            width: 1056px;
            height: 73px;
            margin-left: 64px;
            margin-top: 80px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .headline-span-board{
            font-size: 61px;
            font-weight: 700;
        }

        .input-container{
            height: 48px;
            width: 504px;
            gap: 32px;
            display: flex;
            align-items: center;
        }

        .input-find-task{
            width: 312px;
            height: 48px;
            padding: 8px 16px 8px 16px;
            border-radius: 10px;
            border: 1px solid #A8A8A8;
            font-size: 20px;
            font-weight: 400;
            color: #D1D1D1;  
        }

        .button-add-task-board{
            width: 160px;
            height: 48px;
            padding: 8px 16px 8px 16px;
            gap: 4px;
            border-radius: 10px;
            border: 1px solid #2A3647;
            background-color:#2A3647;
            color: #FFFFFF;
            font-size: 21px;
            font-weight: 700;
            display: flex;
            align-items: center;
        }

        .column-titel-container{
            width: 1208px;
            height: 24px;
            padding-left: 64px;
            padding-right: 64px;
            margin-top: 48px;
            display: flex;
            justify-content: space-between;
        }

        .column-titel{
            width: 244px;
            height: 24px;
            display: flex;
            justify-content: space-between;
            font-size: 20px;
            font-weight: 700;
            color: #42526E;
        }

        .button-titel{
            width: 24px;
            height: 24px;
            padding: 3px;
            border-radius: 8px;
            border: 2px solid #2A3647;
            opacity: 0px;
        }

        .drag-area-container{
            width: 1208px;
            height: 688px;
            margin-top: 8px;
            padding: 0px 64px 0px 64px;
            gap: 26px;
            display: flex;
            justify-content: space-between;
        }

        .drag-area{
            width: 246px;
            min-height: 688px;
            transition: 0.3s;
            border-radius: 8px;
        }

        .titel-card {
            width: 252px;
            height: 256px;
            border-radius: 24px;
            padding: 16px;
            margin-bottom: 10px;
            background-color: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: grab;
        }

        .no-tasks {
            width: 246px;
            height: 48px;
            border-radius: 10px;
            border: 1px solid #a8a8a8;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #e7e7e7;
            font-size: 16px;
            font-weight: 400;
        }

    </style>

</head>
<body>
    <div id="sidebar-placeholder"></div>
    <div id="header-placeholder"></div>
    <div class="main-board">
        <div class="board-headline-container">
            <div class="board-add-task">
                <div>
                    <span class="headline-span-board">Board</span>
                </div>
                <div class="input-container">
                    <input class="input-find-task" placeholder="Find Task" type="text">
                    <button class="button-add-task-board">Add task <img src="./assets/img/add.svg" alt=""></button>
                </div>
            </div>
            <div class="column-titel-container">
                <div class="column-titel">
                    <span>To do</span>
                    <button class="button-titel"><img class="cross-titel-button" src="./assets/img/Capa 1.svg" alt=""></button>
                </div>
                <div class="column-titel">
                    <span>In progress</span>
                    <button class="button-titel"><img class="cross-titel-button" src="./assets/img/Capa 1.svg" alt=""></button>
                </div>
                <div class="column-titel">
                    <span>Await feedback</span>
                    <button class="button-titel"><img class="cross-titel-button" src="./assets/img/Capa 1.svg" alt=""></button>
                </div>
                <div class="column-titel">
                    <span>Done</span>
                    <div></div>
                </div>
            </div>
        </div>
        <div class="drag-area-container">
            <div class="drag-area" id="todo"></div>
            <div class="drag-area" id="inProgress"></div>
            <div class="drag-area" id="awaitFeedback"></div>
            <div class="drag-area" id="done"></div>
        </div>
    </div>

    <script>

    let todos = [
        {
            'id': 0,
            'titel': 'Kochwelt Page & Recipe Recommender',
            'category': 'inProgress', 
        },
        {
            'id': 1,
            'titel': 'HTML Base Template Creation',
            'category': 'awaitFeedback', 
        },
        {
            'id': 2,
            'titel': 'CSS Architecture Planning',
            'category': 'done',
        },
        {
            'id': 3,
            'titel': 'Neue Aufgabe fÃ¼r To Do',
            'category': 'todo',
        }
    ];

    document.addEventListener('DOMContentLoaded', (event) => {
        updateHTML();
    
        const dragAreas = document.querySelectorAll('.drag-area');
        dragAreas.forEach(area => {
            area.addEventListener('dragover', allowDrop);
            area.addEventListener('drop', dropTask);
        });
    });

    function allowDrop(ev) {
        ev.preventDefault();
    }

    function dropTask(ev) {
        ev.preventDefault();
        const taskId = ev.dataTransfer.getData("text");
        const taskElement = document.getElementById(taskId);
        ev.currentTarget.appendChild(taskElement);

        const newCategory = ev.currentTarget.id;
        todos = todos.map(task => task.id == taskId ? { ...task, category: newCategory } : task);

        updateHTML();
    }

    function generateTodoHTML(element) {
        return `<div id="${element['id']}" class="titel-card" draggable="true" ondragstart="dragTask(event)">
                    ${element['titel']}
                </div>`;
    }

    function dragTask(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
    }

    function updateHTML() {
        // To-Do Category
        let todoTasks = todos.filter(t => t['category'] === 'todo');
        let todoContainer = document.getElementById('todo');
        todoContainer.innerHTML = '';

        if (todoTasks.length === 0) {
            todoContainer.innerHTML = `<div class="no-tasks">No tasks To do</div>`;
        } else {
            todoTasks.forEach(task => {
                todoContainer.innerHTML += generateTodoHTML(task);
            });
        }

        // In-Progress Category
        let inProgressTasks = todos.filter(t => t['category'] === 'inProgress');
        let inProgressContainer = document.getElementById('inProgress');
        inProgressContainer.innerHTML = '';

        if (inProgressTasks.length === 0) {
            inProgressContainer.innerHTML = `<div class="no-tasks">No tasks In progress</div>`;
        } else {
            inProgressTasks.forEach(task => {
                inProgressContainer.innerHTML += generateTodoHTML(task);
            });
        }

        // Await Feedback Category
        let feedbackTasks = todos.filter(t => t['category'] === 'awaitFeedback');
        let feedbackContainer = document.getElementById('awaitFeedback');
        feedbackContainer.innerHTML = '';

        if (feedbackTasks.length === 0) {
            feedbackContainer.innerHTML = `<div class="no-tasks">No tasks Await feedback</div>`;
        } else {
            feedbackTasks.forEach(task => {
                feedbackContainer.innerHTML += generateTodoHTML(task);
            });
        }

        // Done Category
        let doneTasks = todos.filter(t => t['category'] === 'done');
        let doneContainer = document.getElementById('done');
        doneContainer.innerHTML = '';

        if (doneTasks.length === 0) {
            doneContainer.innerHTML = `<div class="no-tasks">No tasks Done</div>`;
        } else {
            doneTasks.forEach(task => {
                doneContainer.innerHTML += generateTodoHTML(task);
            });
        }
    }
    </script> 
    </body> 
</html>